[package]
edition  = "2021"
include  = ["README.md"]
name     = "unionlabs"
resolver = "2"
version  = "0.1.0"

[dependencies]
arbitrary              = { workspace = true, optional = true, features = ["derive"] }
bip32                  = { workspace = true, default-features = false, features = ["secp256k1"] }
bitvec                 = { workspace = true }
chrono                 = { workspace = true, features = ["alloc"] }
clap                   = { workspace = true, features = ["derive"] }
contracts              = { workspace = true, optional = true }
cosmwasm-std           = { workspace = true }
derive_more            = { workspace = true, features = ["display"] }
either                 = { workspace = true }
enumorph               = { workspace = true }
ethers-contract-derive = { workspace = true, optional = true }
ethers-core            = { workspace = true, optional = true }
frunk.workspace        = true
generic-array          = "0.14.7"
hex                    = { workspace = true }
hex-literal            = { workspace = true }
k256                   = { version = "0.13.1", default-features = false, features = ["schnorr"] }           # needs to be brought in explicitly since bip32 doesn't expose k256/schnorr
milagro_bls            = { workspace = true, default-features = false }
paste                  = { version = "1.0" }
primitive-types        = { workspace = true, features = ["serde_no_std"] }
prost                  = { workspace = true, features = ["std"] }
protos                 = { workspace = true, default-features = false, features = ["proto_full", "serde"] }
ripemd                 = { workspace = true }
rlp                    = { workspace = true, features = ["derive"] }
rs_merkle              = "1.4.1"
serde                  = { workspace = true, features = ["derive"] }
serde-utils            = { workspace = true }
serde_json             = { workspace = true, optional = true }
sha2                   = { workspace = true }
ssz                    = { workspace = true, default-features = false }
ssz_types              = { workspace = true, default-features = false }
subtle-encoding        = { workspace = true, features = ["bech32-preview"] }
thiserror              = { workspace = true }
tracing                = { workspace = true }
tree_hash              = { workspace = true, default-features = false }
typenum                = { workspace = true, features = ["const-generics", "no_std"] }
uint                   = "*"
wasmparser             = { version = "0.113" }

[dev-dependencies]
rand       = "0.8.5"
serde_json = { workspace = true }
# unionlabs  = { path = ".", features = ["arbitrary"] } # enable the "arbitrary" feature for tests

[features]
default = ["ethabi", "std"]

ethabi = ["contracts", "ethers-core", "ethers-contract-derive"]
grpc   = ["protos/client"]
std    = ["tree_hash/detect-cpufeatures"]

arbitrary = ["dep:arbitrary", "primitive-types/arbitrary", "ssz_types/arbitrary"]
fuzzing   = ["arbitrary", "serde_json"]
